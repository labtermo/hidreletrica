# LaboratÃ³rio de Sistemas hidrelÃ©tricos Faculdade de Engenharia da UnB @ campus Gama 

# 1. ApresentaÃ§Ã£o

O laboratÃ³rio de sistemas hidrelÃ©tricos foi criado em 2010 a partir de um projeto de pesquisa e desenvolvimento financiado pelo CNPq. 
Este projeto chamada "Inovatrans" teve como objetivo avaliar e modelar uma turbina denominada Indalma inventada por um empreendedor na AmazÃ´nia e para fazer isso foi desenvolvido uma bancada para fazer o levantamento das caracterÃ­sticas dessa turbina.

Entretanto, buscou-se desenhar a bancada levando em conta a necessidade de um labortaÃ³rio didÃ¡tico para o curso de engenharia de energia. 
A proposta era de projetar um laboratÃ³rio o mais realista possÃ­vel de uma situaÃ§Ã£o real, em contraposiÃ§Ã£o a tendÃªncia de prÃ¡ticas laboratÃ³riais baseados em kits didÃ¡ticos especialmente desenvolvidos para trabalhar alguns conceitos especÃ­ficos do conteÃºdo ministrado em sala de aula.

O uso desses kits didÃ¡ticos especÃ­ficos tendem a simplificar a complexidade de um sistema de geraÃ§Ã£o e conversÃ£o de energia, pois tem a preocupaÃ§Ã£o de ensinar o princÃ­pio de funcionamento, mas deixa o tÃ£o necessÃ¡rio contato com sistemas reais em segundo plano. 

Essa tendÃªncia de simplificaÃ§Ã£o dos laboratÃ³rios e um certo afastamento dos sistemas mais reais e complexos nas prÃ¡ticas laboratoriais nÃ£o Ã© recente e caracteriza uma limitaÃ§Ã£o na formaÃ§Ã£o do engenheiro, que nÃ£o adquire conhecimento para trabalhar em situaÃ§Ãµes reais que envolvem problemas e desafios constantes. 
Isto Ã©, o estudante perde a possibilidade de entender o processo de conversÃ£o de energia no seu conjunto, sendo que poderia experimentar ou aplicar o conteÃºdo de diversas disciplinas com a mesma instalaÃ§Ã£o laboratorial mais prÃ³xima de realidade, analisando e tratando problemas de engenharia com vÃ¡rios nÃ­veis de profundidade

Pois, sabe-se que um sistema de conversÃ£o de energia em escala reduzida pode ter a mesma complexidade operacional de um sistema real e requer uma infraestrutura apropriada para seu correto funcionamento. 

Por isso o laboratÃ³rio de sistemas hidrelÃ©tricos foi construÃ­do com componentes industriais reais disponÃ­veis no mercado com uma configuraÃ§Ã£o mais prÃ³ximo possÃ­vel de uma instalaÃ§Ã£o real. 
O laboratÃ³rio Ã© composto por uma bacada de ensaios onde podem ser testados turbinas hidraulicas. 

![Figura 1](fotos/foto_bancada_turbinas.jpg)

A foto da instalaÃ§Ã£o do laboratÃ³rio mostra a bancada de ensaios (a) e a turbina Indalma (b) e turbina Kaplan (b) que podem ser montados na instalaÃ§Ã£o.

A bancada eÌ composta por circuito hidraÌulico com reservatoÌrio de 1000 litros, bomba de 25CV, tubulacÌ§aÌƒo de 8â€™, 6â€™ e 4â€™ com queda de ateÌ 7 metros, turbina hidraÌulica sobre teste, canal de saiÌda com vertedouro triangular. 
O circuito hidraÌulico foi de tal forma desenhado que eÌ possiÌvel programar uma altura constante de coluna d'aÌgua por meio das vaÌlvulas que transbordem a aÌgua para o dreno. 
A vazaÌƒo da bomba pode ser controlada por meio de um inversor de frequeÌ‚ncia, permitindo assim um controle mais preciso da pressaÌƒo da coluna d'aÌgua no circuito de aducÌ§aÌƒo da turbina. 
A turbina pode ser acoplada a um freio de Prony ou a um gerador eleÌtrico, permitindo a colocar carga mecaÌ‚nica ou eleÌtrica respectivamente.


1. Inversor de frequÃªncia WEG ğ¶ğ¹ğ‘Š09;
2. Motor WEG, trifÃ¡sico, 1750ğ‘…ğ‘ƒğ‘€, 25ğ¶ğ‘‰ , 60ğ»ğ‘§;
3. Bomba KSBğ¸ğ‘‡ğ´ğ‘100âˆ’250,ğ‘„=184,4ğ‘š3/h,ğ»=21,3ğ‘šğ‘ğ‘; 
4. Turbina Indalma com diÃ¢metro de entrada de saÃ­da de 4â€;
5. ReservatÃ³rio de Ã¡gua compacidade de 1000ğ‘™;
6. Medidores de pressÃ£o;
7. Medidor de vazÃ£o volumÃ©trica ğ¶ğ‘‚ğ‘ğ‘‡ğ¸ğ¶ğ» modelo ğ¶ğ‘‡ğ»ğ»ğ· 4â€;
8. Vertedor triangular;
9. CÃ©lulas de carga da marca ğ‘€ğ¾ modelo ğ¶ğ‘†ğ´/ğ‘ğ¿ âˆ’ 20;
10. Sensor indutivo ğ½ğ‘ğº modelo ğ¿ğ‘€ 8 âˆ’ 3002ğ‘ ğ´;
11. VÃ¡lvulas manuais para o sistema de controle de pressÃ£o auxiliar.


![](figuras/componentes_bancada.jpg)

O laboratÃ³rio permite a realizaÃ§Ã£o de experiÃªncias de apoio a diversas disciplinas do curso de engenharia de energia, alÃ©m de pesquisas a nÃ­vel de graduaÃ§Ã£o e posgraduaÃ§Ã£o. 
Nos ultimos anos o laboratÃ³rio tem permitido a produÃ§Ã£o de 2 trabalhos de iniciaÃ§Ã£o cientÃ­fica, 7 de conclusÃ£o de curso e 2 mestrados.


 
# 2. PROPOSTA METODOLOÌGICA
O laboratÃ³rio de sistemas hidrelÃ©tricos conta com vaÌrios elementos que compoÌƒem uma central hidreleÌtrica em escala reduzida. Visto que cada elemento tem uma funcÌ§aÌƒo com um niÌvel de complexidade diferente, a proposta eÌ trabalhar em diferentes niÌveis de acordo com a disciplina que utilize o laboratÃ³rio.

## 2.1. Primeiro niÌvel: operacÌ§aÌƒo manual demonstrativa com instrumentacÌ§aÌƒo analoÌgica elementar.
ExperieÌ‚ncias direcionadas aÌ€s disciplinas do segundo, terceiro e quarto semestre podendo trabalhar conceitos de fonte de energia, fenoÌ‚menos de transporte. Este niÌvel inclui a utilizacÌ§aÌƒo de vertedouro triangular para o caÌlculo da vazaÌƒo, caÌlculo da perda de carga na tubulacÌ§aÌƒo e medicÌ§aÌƒo de pressaÌƒo.
Neste niÌvel tambeÌm eÌ possiÌvel aplicar a teoria do balancÌ§o de energia, a partir da simplificacÌ§aÌƒo da EquacÌ§aÌƒo de Bernoulli eÌ possiÌvel obter um resultado aproximado para a velocidade e calcular a vazaÌƒo. Esta anaÌlise apresenta o quanto a teoria estaÌ perto da realidade e quais saÌƒo os fatores que interferem para a provaÌvel diferencÌ§a de valores.


## 2.2. Segundo niÌvel: instrumentacÌ§aÌƒo para entender e avaliar o comportamento hidrodinaÌ‚mico da turbina ou circuito de bombeamento.

ExperieÌ‚ncias direcionadas aÌ€s disciplinas do quarto e quinto semestre de engenharia (fenoÌ‚menos de transporte, dinaÌ‚mica dos fluidos, maÌquinas de fluxo). Neste niÌvel de complexidade o aluno utiliza uma placa de orifiÌcio com sensores de pressaÌƒo para a medicÌ§aÌƒo da vazaÌƒo, o freio de Prony para obtencÌ§aÌƒo do torque e caÌlculo da poteÌ‚ncia da turbina.

## 2.3. Terceiro niÌvel: geracÌ§aÌƒo de energia eleÌtrica e sua interligacÌ§aÌƒo com a rede de distribuicÌ§aÌƒo eleÌtrica.
ExperieÌ‚ncias direcionadas aÌ€ disciplinas do quinto, sexto e seÌtimo semestres. Circuitos eleÌtricos, conversaÌƒo eletromecaÌ‚nico de energia, transmissaÌƒo e distribuicÌ§aÌƒo de energia.
Neste niÌvel de complexidade o foco das experieÌ‚ncias eÌ na conversaÌƒo eletromecaÌ‚nica de energia eleÌtrica e o uso da eletricidade gerada. AleÌm do processo de conversaÌƒo, tambeÌm podem ser trabalhados conceitos ligado a qualidade de energia, como correcÌ§aÌƒo de fator de poteÌ‚ncia e geracÌ§aÌƒo distribuiÌda.

## 2.4. Quarto niÌvel: controle de processo e sistemas dinaÌ‚micos.
ExperieÌ‚ncias direcionadas aÌ€ disciplina de instrumentacÌ§aÌƒo e controle de sistemas dinaÌ‚micos do seÌtimo, oitavo e nono semestre de engenharia. A bancada permite o estudo da turbina hidraÌulica como um sistema de geracÌ§aÌƒo que permite que alunos desenvolvam experieÌ‚ncias de controle de processo e instrumentacÌ§aÌƒo na referida bancada.
AleÌm da modelagem matemaÌtica de toda a estrutura do reservatoÌrio, conduto forcÌ§ado e a proÌpria turbina, o sistema eleÌtrico tambeÌm pode ser modelado e estudado. SeraÌƒo desenvolvidos dois modelos do conjunto, circuito hidraÌulico e turbina. Um modelo linear em torno de um ponto de operacÌ§aÌƒo do sistema e um modelo naÌƒo linear. O modelo linear representa o desempenho da turbina a pequenas variacÌ§oÌƒes de sinal, onde o aluno poderaÌ reconhecer esses sinais.

[1] Els RH van, SILVA JM da, AraÃºjo BBM, Santander OLS. LaboratÃ³rio real de geraÃ§Ã£o hidrelÃ©trcia - Proposta de metodolÃ³gica de utlizaÃ§Ã£o de bancada de ensaio de turbina hidrÃ¡ulica no curso de engenharia de energia. XLI Congr. Bras. Educ. em Eng. - COBENGE 2013, Gramada - RS: 2013.


# 3. InstrumentaÃ§Ã£o e sua instalaÃ§Ã£o

O projeto da instrumentaÃ§Ã£o do laboratÃ³rio de sistemas hidrelÃ©tricos tambÃ©m foi desenvolvido para chegar mais prÃ³ximo a situaÃ§Ã£o real que se possa encontrar na indÃºstria, levando em conta o porte da instalaÃ§Ã£o. 

Os principais variÃ¡veis que se precisa ler no sistema sÃ£o:

* VariÃ¡veis hidraulicos (altura da coluna de Ã¡gua, pressÃ£o e vazÃ£o) 
* VariÃ¡veis mecÃ¢nicos (rotaÃ§Ã£o da turbina e torque)
* VariÃ¡veis elÃ©tricos (tensÃ£o, corrente, potÃªncia e fator de potÃªncia)

Procurou-se ter 3 planos de instrumentaÃ§Ã£o. 

1. InstrumentaÃ§Ã£o analÃ³gia simples
2. InstrumentaÃ§Ã£o eletrÃ´nica que permite a leitura independente
3. InstrumentaÃ§Ã£o eletrÃ´nica que pode ser integrada num Scada

No primeiro plano de instrumentaÃ§Ã£o analÃ³gica simples os instrumentos usados sÃ£o bÃ¡sicamente, rÃªgua, balde, cronÃ´metro, balanÃ§a e contador de pulsos. 

A instrumentaÃ§Ã£o eletrÃ´nica usado no segundo e terceiro plano serÃ£o apresentados neste capÃ­tulo. 

Essa instrumentaÃ§Ã£o eletrÃ´nica foi desenvolvido no seguinte trabalho de conclusÃ£o de curso: 

Calixto, Rodrigo de O. Sistema SupervisÃ³rio para Bancada de Ensaio de Picoturbina HidrÃ¡ulica Indalma. Trabalho de conclusÃ£o de curso de Engenharia eletrÃ´nica - Universidade de BrasÃ­lia, 2015.


## 3.1. PressÃ£o

![](fotos/sensor_pressao.jpg)



## 3.2. VazÃ£o volumÃ©trica


![](fotos/foto_med_vazao.jpg)

![](fotos/especificacao_medidor_vazao.jpg)

![](fotos/certificado_calibracao_med_vazao.jpg)

## 3.3. Sensor de rotaÃ§Ã£o

O sensor de rotacao Ã© baseado num sensor de proximidade indutivo conforem mostrado na figura a seguir.

![](fotos/sensor_rotacao.jpg)

O sensor de proximidade Ã© do tipo NPN coletor aberto com os seguintes pinos mostrados na fotos a seguir. 

![](fotos/pinagem_proximidade.jpg)

| fio | descriÃ§Ã£o |  Borne cor da emenda|           
|:----:|:--------:|:---------:|:------:|
| BN - Brown | AlimentaÃ§Ã£o 6-30Vdc | Vermelho| 
| BK - Black | sinal cÃ©lula | Preto |
| BU - Blue  | GND | Amarelo |

A conversÃ£o dos pulsos em velocidade poder ser feito de vÃ¡rias maneiras. 



## 3.4. Freio de Prony com cÃ©lula de carga

Para medir a potÃªncia mecÃ¢nica no eixo desenvolvido pela turbina pode ser usar o Freio de Prony.

O elemento principal do freio Ã© a cÃ©lula de carga, mostrada na figura a seguir.

![](fotos/foto_celula_carga.jpg)

Folha de especificaÃ§Ã£o tÃ©cnica da cÃ©lula de carga.

![](fotos/especificacao_celula_carga.jpg)


[Video de freio de prony montada na bancada](https://youtu.be/LnSO-6u0-hE)



# 4. Sistema de supervisÃ£o, controle e  aquisiÃ§Ã£o de dados do laboratÃ³rio

O sistema de supervisÃ£o, controle e  aquisiÃ§Ã£o de dados do laboratÃ³rio (Supervisory Control and Data Acquisition - SCADA) foi desenhado para integrar todos os elementos do laboratÃ³rio em uma Ãºnica plataforma.

Os principais elementos sÃ£o:

* Computador supervisÃ³rio
* Placa de aquisiÃ§Ã£o de dados das variÃ¡veis hidraulicas e mecÃ¢nicas 
* Controle e monitoraÃ§Ã£o da bomba hidraulica
* Rede local de comunicaÃ§Ã£o
* Interface de mediÃ§Ã£o e monitoraÃ§Ã£o de variÃ¡veis elÃ©tricas

Escolheu-se como plataforma de integrar todos estes elementos o software ScadaBR. 
A figura a seguir mostra a primeira configuraÃ§Ã£o do sistema com os seguintes componentes:

1. inversor CFW9 para controle da moto-bomba hidraulica
2. placa de aquisiÃ§Ã£o das variÃ¡veis hidraulicas 
3. placa de aquisiÃ§Ã£o das variÃ¡veis mecÃ¢nicas 
4. moto bomba 
5. tubulaÃ§Ã£o de 6"
6. turbulaÃ§Ã£o de 4"
7. turbina Indalma 
8. ambor de freio 
9. cÃ©lula de carga
10. sensor de vazÃ£o
11. interface RS485 para o inversor CFW9
12. interface RS485 para o supervisÃ³rio 
13. computador supervisÃ³rio 
14. wifi para ligar placa de aquisiÃ§Ã£o de sinal


![](figuras/disposicao_medidores.jpg)

O diagrama de blocos a seguir mostra o detalhamento dessa configuraÃ§Ã£o.


![](figuras/diagrama_blocos_instrumentacao.jpg)

A interface de mediÃ§Ã£o e monitoramento de variÃ¡veis elÃ©tricos estÃ¡ sendo desenvolvido. 

As placas para aquirir as variÃ¡veis hidraulicas e mecÃ¢nicas serÃ£o apresentado na proxima secÃ§Ã£o. As duas placas de aquisiÃ§Ã£o sÃ£o idÃªntiticas. 


## 4.1. Placa de aquisiÃ§Ã£o de dados com ESP32

O desenvolvimento da placa de aquisiÃ§Ã£o - terceira versÃ£o. A primeira versÃ£o foi do CW552 da Controlware. O segunda versÃ£o foi desenvolvido trabalho de TCC Rodrigo Calixto baseado no Arduino.
Terceira versÃ£o desenvolvido em ESP32.

Requisitos:

* Concentrar todas os sensores e transdutores
* LigaÃ§Ã£o com computador wireless 
* Protocolo Modbus-IP a uma taxa de amostragem de 1Hz
* Capacidade de medir dados a 10Hz de amostragem e encaminhar a porta serial dedicado a 115kBPS
* display LCD mostrando todos os dados
* configuraÃ§Ã£o de IP dinÃ¢mico e estÃ¡tico 
* AlimentaÃ§Ã£o 5, 12 e 24Volts DC


![](figuras/esquema_esp32wifi.jpg)

| conector | descriÃ§Ã£o |  sinal|           
|:----:|:--------:|:---------:|
| Jx | Sensor rotaÃ§Ã£o da turbina  | pulsos em 12V  |  
| Jx | Amplificador cÃ©lula carga 1 | 0-10V  |
| Jx | Amplificador cÃ©lula carga 2 | 0-10V  |
| Jx | abertura de borboleta | 0-3.3V
| Jx | vazÃ£o | 4-20mA |




![](figuras/Dinamometro_ESP32_wifi_modbus_freio_turbina_2025.jpg)




| item | descriÃ§Ã£o | Interface | FunÃ§Ã£o | pino pcb placa |           
|:----:|:--------:|:---------:|:------:|:----:|
| 1 | Sensor de entrada analÃ³gica | 0 - 10 v | ler sinal cÃ©lula de carga | |
| 2 | Sensor de entrada analÃ³gica | 0 - 10 v | ler sinal cÃ©lula de carga | |
| 3 | Entrada de pulsos           | coletor aberto | ler frequencia |   |    
| 4 | Entrada de pulsos           | coletor aberto | ler frequencia | 2 |   
| 5 | Sensor de loop de corrente  |  4-20mA  |  ler vazÃ£o    |  3   |
| 6 | Sensor de loop de corrente  |  4-20mA  |  ler pressÃ£o  | 19   | 
| 7 | SÃ¡ida para display LCD      | TTL      | mostrar os dados | |
| 8 | Interface de comunicaÃ§Ã£o    | RS485 & WiFi |comunicaÃ§Ã£o como o supervisÃ³rio |
| 9 | Interface serial digital    | TTL      | conversor ADC |






## 4.2. Programa da placa de aquisiÃ§Ã£o de dados

```
/*
  Programa para ler e transmitir os dados do dinamometro da bancada Indalma para o Scada
  Os valores de torque1, torque2, vazao e rotacao sÃ£o lidos a uma taxa de amostragem de 10Hz e sÃ£o mandados
  para a porta serial com timestamp uma taxa de 115kbps
  A cada segundo os valores medios sÃ£o calculados guardados nos Registrador Modbus Ireg

  Baseado na bibioteca de (c)2020 Alexander Emelianov (a.m.emelianov@gmail.com)
  https://github.com/emelianov/modbus-esp8266
  
  modbus Ireg 100 sensor de rotacao em hz pino GPIO25  
  modbus Ireg 101 sensor de torque1 analogRead ADC1_CH6  GPIO34
  modbus Ireg 102 sensor de torque2 analogRead ADC1_CH7  GPIO35
  modbus Ireg 103 sensor de vazao analogRead   

  LCD  clk =  D18 
  LCD  data=  D23 
  LCD  CS=    D4 
  LCD  reset= D17      
        
*/

#include <ModbusRTU.h>
#include <WiFi.h>
#include <ModbusTCP.h>
#include <EEPROM.h>

#include "U8g2lib.h"

U8G2_ST7920_128X64_F_SW_SPI u8g2(U8G2_R0, /* clock=*/ 18 /* A4 */ , /* data=*/ 23 /* A2 */, /* CS=*/ 4 /* A3 */, /* reset=*/ 17);

#define EEprom_end_status 0
#define EEprom_end_nome   25
#define EEprom_end_senha  50
#define EEprom_end_ip_fix 75 

//
//  hardware Entrada de dados 
//
#define pino_externo_cont 25    
#define pino_torque1 35
#define pino_torque2 34
#define pino_flow 32
#define pino_abertura 33 
#define LedPin 22

hw_timer_t *timer = NULL;

ModbusTCP mb_ip;

IPAddress endereco_ip;

unsigned long cont_millis;
unsigned long ant_millis=0;
unsigned long cont_millis_lcd;
unsigned long ant_millis_lcd=0;

int contador_pulsos;

int s_torque1;
int s_torque2;
int s_rotacao;
int s_flow;
int s_abertura;

long int t_torque1=0;
long int t_torque2=0;
long int t_rotacao=0;
long int t_flow=0;
long int t_abertura=0;

int media_torque1;
int media_torque2;
int media_rotacao;
int media_flow;
int media_abertura;

int contador_amostras=0;

bool cb(Modbus::ResultCode event, uint16_t transactionId, void* data) { // Callback to monitor errors
  if (event != Modbus::EX_SUCCESS) {
    Serial.print("Request result: 0x");
    Serial.print(event, HEX);
    // erro=1;
  }
  return true;
}


void configura_wifi(void)
{
}

void inicia_lcd(void)
{
  u8g2.begin(); 
  u8g2.clearBuffer();          // clear the internal memory 
  u8g2.setFont(u8g_font_unifont);
  u8g2.drawStr(20, 20, "Dinamometro");
  u8g2.drawStr(20, 38, "05/02/2025");          
  u8g2.sendBuffer();    
}

boolean led_estado=0;

// interrupcoes 

void ARDUINO_ISR_ATTR onTimer() 
{
  s_rotacao=contador_pulsos; 
  contador_pulsos=0;
}

void IRAM_ATTR int_externo_rotina()
{
  contador_pulsos=contador_pulsos+1;
}

void configura_timer_interrupt(void)
{
  timer = timerBegin(1000000);  // configura frequencia de 1000 hz
  timerAttachInterrupt(timer, &onTimer);
  timerAlarm(timer, 100000, true, 0);  // chama onTimer cada 100 x 1ms
}

void setup() 
{
  char readChar;
  String nom_rede,senha,ip_fixo;
  int Memaddress,x;
  unsigned char WiFistatus;

  pinMode(pino_externo_cont, INPUT); 
  pinMode(LedPin, OUTPUT);

  configura_timer_interrupt();

  analogReadResolution(12);
  attachInterrupt(pino_externo_cont, int_externo_rotina, CHANGE); 
  delay(500);
  inicia_lcd(); 
  
  Serial.begin(115200);
  delay(1000);
  Serial.println(" ");
  Serial.println("Termofluid_torque_rot_wifi_modbus_IP_config_lcd_2024_11_07");

  Serial.println("WiFi begin");  
  
  WiFi.begin(nom_rede,senha);

  long int espera_wifi;  // espera 30 segundos
  espera_wifi = millis();
  
  while ((WiFi.status() != WL_CONNECTED) && (millis() < (espera_wifi+30000))) 
  {
    delay(500);
    Serial.print(".");
    if (Serial.available() > 0) configura_wifi();
  } 
  
  Serial.println("");
  Serial.print("IP address: ");
  Serial.println(WiFi.localIP());

  endereco_ip= WiFi.localIP(); 

  mb_ip.server();
  mb_ip.addIreg(100);  
  mb_ip.addIreg(101);
  mb_ip.addIreg(102);
  mb_ip.addIreg(103); 
  mb_ip.addIreg(104);
}

void Lcd_tela(void) {
 String s; 
 u8g2.clearBuffer();
 u8g2.setCursor(5,15);
 if (WiFi.status() != WL_CONNECTED) u8g2.print("Sem wifi"); else u8g2.print(endereco_ip);
 u8g2.drawStr( 1, 30, "RPM");  u8g2.setCursor( 30,30); u8g2.print(media_rotacao); 
 u8g2.drawStr( 1, 45, "FLW");  u8g2.setCursor( 30,45); u8g2.print(media_flow);   
 u8g2.drawStr(65, 45, "ABR");  u8g2.setCursor( 95,45); u8g2.print(media_abertura);   
 u8g2.drawStr( 1, 60, "TQ1");  u8g2.setCursor( 30,60); u8g2.print(media_torque1);   
 u8g2.drawStr(65, 60, "TQ2");  u8g2.setCursor( 95,60); u8g2.print(media_torque2);   
 u8g2.sendBuffer();    
}

void leia_dados(int var_cont)
{
 contador_amostras++;
 s_torque1 =analogRead(pino_torque1); 
 s_torque2 =analogRead(pino_torque2); 
 s_flow    =analogRead(pino_flow); // Serial.print(var_cont);Serial.print("; "); 
 s_abertura=analogRead(pino_abertura);
 Serial.print(s_rotacao); Serial.print(" ; "); Serial.print(s_flow); Serial.print(" ; "); 
 Serial.print(media_torque1); Serial.print(" ; "); Serial.print(media_torque2);Serial.print(" ; "); Serial.println(s_abertura);
 //Serial.print(" ; "); Serial.println(0);
 t_rotacao =t_rotacao  + s_rotacao;
 t_torque1 =t_torque1  + s_torque1;
 t_torque2 =t_torque2  + s_torque2;
 t_flow    =t_flow     + s_flow;
 t_abertura=t_abertura + s_abertura;
 if (contador_amostras>=10) 
 { 
  contador_amostras=0;
  media_rotacao =t_rotacao/10;
  media_torque1 =t_torque1/10;
  media_torque2 =t_torque2/10;
  media_flow    =t_flow/10;
  media_abertura=t_abertura/10;
  t_rotacao=0;
  t_torque1=0;
  t_torque2=0;
  t_flow=0;
  t_abertura=0;
 }
}


void loop() {

  if (Serial.available() > 0) { configura_wifi(); }
  mb_ip.task();  
  cont_millis = millis();
  if (cont_millis > ant_millis)
  {
   ant_millis=cont_millis+99; // 100; //era 1000 
   leia_dados(cont_millis);
  }
  cont_millis_lcd = millis();
  if (cont_millis_lcd > ant_millis_lcd)
  {
   ant_millis_lcd=cont_millis_lcd+1000; 
   Lcd_tela();  
   mb_ip.Ireg(100, media_rotacao); 
   mb_ip.Ireg(101, media_torque1);
   mb_ip.Ireg(102, media_torque2);
   mb_ip.Ireg(103, media_flow); 
   mb_ip.Ireg(104, media_abertura);  
  }
}
```



Diagrama PID 
![](figuras/diagrama_pid.jpg)


## 4.3. Rede de comunicaÃ§Ã£o

![](figuras/rede_comunicacao.jpg)

Rede MODBUS

* MODBUS-IP
* MODBUS-RTU



## 4.4. Controle do pressÃ£o da bomba

![](figuras/diagrama_blocos_controle_pressao.jpg)


Santos MECM dos. Controle da pressÃ£o de operaÃ§Ã£o da Bancada de Testes para Turbinas HidrÃ¡ulicas. Trabalho de conclusÃ£o de curso de Engenharia de Energia - Universidade de BrasÃ­lia, 2015.

# 5. Ensaios do segundo nÃ­vel metodolÃ³gico - Carga MecÃ¢nica
Freio de prony.


![](figuras/CurvaPOTxRPM.jpg)





# 6. Ensaios do terceiro nÃ­vel metodolÃ³gico  - GeraÃ§Ã£o de energia elÃ©trica

![](fotos/acoplamento_turbina_gerador.jpg)
 
 
![](fotos/cargas_eletricas.jpg)

 
![](fotos/cargas_eletricas2.jpg)

# 7. Ensaios do quarto nÃ­vel metodolÃ³gico - Controle e sistemas dinÃ¢micos

[1] Santander OLS. Montagem e instrumentaÃ§Ã£o de uma bancada para turbina hidrÃ¡ulica. DissertaÃ§Ã£o em sistema mecatrÃ´nicos - Universidade de BrasÃ­lia, 2014.


## 7.1. RegulaÃ§Ã£o da geraÃ§Ã£o por meio de controle de valvula de abertura da turbina

![](fotos/montagem_controle_valvula.jpg)

![](fotos/foto_acionador_valvula.jpg)

![](figuras/supervisirio_controle_valvula.jpg)

[1] Alves KD. Desenvolvimento de regulador de velocidade para Turbina Indalma com sintonia PID baseado em OtimizaÃ§Ã£o por Enxame de PartÃ­culas ( PSO ). Universidade de BrasÃ­lia, 2018.

## 7.2. RegulaÃ§Ã£o da geraÃ§Ã£o por meio de controle potÃªncia por meio de carga de lastro 

# 8. Bibliografia


## 8.1. IniciaÃ§Ã£o cientÃ­fica

Els RH van, SILVA JM da, AraÃºjo BBM, Santander OLS. LaboratÃ³rio real de geraÃ§Ã£o hidrelÃ©trcia - Proposta de metodolÃ³gica de utlizaÃ§Ã£o de bancada de ensaio de turbina hidrÃ¡ulica no curso de engenharia de energia. XLI Congr. Bras. Educ. em Eng. - COBENGE 2013, Gramada - RS: 2013.

GonÃ§alves JS, Noleto LG, Els RH van. CARACTERIZAÃ‡ÃƒO GEOMÃ‰TRICA E SIMULAÃ‡ÃƒO NUMÃ‰RICA DA DINÃ‚MICA DO ESCOAMENTO DA TURBINA INDALMA - RelatÃ³rio de IniciaÃ§Ã£o cientÃ­fica. Universidade de BrasÃ­lia, BrasÃ­lia: 2012.

## 8.2. Trabalho de conclusÃ£o de curso

[Sloot N, Donald R Mac. Experimental and Numerical Study of the Performance Characteristics of a Pico Hydro Turbine Manufactured By Indalma Industries Inc. Report Bachelor of Science in Mechanical Engineering - Anton de Kom University of Suriname, 2014.](annexos/thesis_Ramsay_Nigel_Final_2014_05_reduzed.pdf)

[Oliveira D dos S. AvaliaÃ§Ã£o Experimental em Modelo Reduzido da Turbina HidrÃ¡ulica Indalma. Trabalho de conclusÃ£o de curso de Engenharia de Energia - Universidade de BrasÃ­lia, 2014.](annexos/Danilo_TCC2.pdf)

[Calixto R de O. Sistema SupervisÃ³rio para Bancada de Ensaio de Picoturbina HidrÃ¡ulica Indalma. Trabalho de conclusÃ£o de curso de Engenharia eletrÃ´nica - Universidade de BrasÃ­lia, 2015.](annexos/TCC2_Rodrigo_de_Oliveira_Calixto_090013476.pdf)

Tavares ITB. InfluÃªncia De Difusor Na EficiÃªncia De Uma Turbina HidrÃ¡ulica. Trabalho de conclusÃ£o de curso em engenharia de energia - Universidade de BrasÃ­lia, 2014.

[Santos MECM dos. Controle da pressÃ£o de operaÃ§Ã£o da Bancada de Testes para Turbinas HidrÃ¡ulicas. Trabalho de conclusÃ£o de curso de Engenharia de Energia - Universidade de BrasÃ­lia, 2015.](annexos/Maria_Eugenia_TCC2_completo.pdf)

Rocha GB. BANCADA DIDÃTICA PARA TURBINA KAPLAN : PROJETO , CONSTRUÃ‡ÃƒO E ESTUDO EXPERIMENTAL. Trabalho de conclusÃ£o de curso de Engenharia de Energia - Universidade de BrasÃ­lia, 2015.

Rocha JB. DiagnÃ³stico de Vazamentos em ReservatÃ³rio para Bancada de Ensaios de Turbina HidrÃ¡ulica. Trabalho de conclusÃ£o de curso engenharia de energia - Universidade de BrasÃ­lia, 2018.

## 8.3. DissertaÃ§Ãµes de mestrado

Santander OLS. Montagem e instrumentaÃ§Ã£o de uma bancada para turbina hidrÃ¡ulica. DissertaÃ§Ã£o em sistema mecatrÃ´nicos - Universidade de BrasÃ­lia, 2014.

Alves KD. Desenvolvimento de regulador de velocidade para Turbina Indalma com sintonia PID baseado em OtimizaÃ§Ã£o por Enxame de PartÃ­culas ( PSO ). DissertaÃ§Ã£o em sistema mecatrÃ´nicos - Universidade de BrasÃ­lia, 2018.

## 8.4. Artigos em congressos e journais

Els RH van, SILVA JM da, AraÃºjo BBM, Santander OLS. LaboratÃ³rio real de geraÃ§Ã£o hidrelÃ©trcia - Proposta de metodolÃ³gica de utlizaÃ§Ã£o de bancada de ensaio de turbina hidrÃ¡ulica no curso de engenharia de energia. XLI Congr. Bras. Educ. em Eng. - COBENGE 2013, Gramada - RS: 2013.

Alves KD, Els RH van. LABORATÃ“RIO DE SISTEMAS HIDRELÃ‰TRICOS APLICADO A FORMACAO DO ENGENHEIRO DE ENERGIA - GERAÃ‡ÃƒO DE ENERGIA ELÃ‰TRICA E CONTROLE DE SISTEMAS DINÃ‚MICOS. XLV Congr. Bras. Educ. em Eng. (COBENGE 2017), Joinville - SC: 2017.

Santander OLS, Silva JM da, ELS RH van. Desenvolvimento de bancada de ensaios de turbina hidrÃ¡ulica. XI Congr. Iberoam. Eng. MecÃ¢nica, Argentina: 2013.

Takatsuka JP, Caldeira LG, Oliveira D dos S, Noleto LG, Velasco LN, Els RH Van. Design and Build-Up of a Small Hydroelectric Power Plant for Engineering Teaching. Am J Hydropower, Water Environ Sytems 2017;5:06â€“10. doi:10.14268/ajhwes.2017.00046.

